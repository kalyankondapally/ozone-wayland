From baa46f848d64e2dadcc29bec7fbfc4f904eff58d Mon Sep 17 00:00:00 2001
From: Kondapally Kalyan <kalyan.kondapally@intel.com>
Date: Sat, 7 Dec 2013 15:28:49 +0200
Subject: [PATCH 3/3] Fix linking issue in inputmethodengine.

---
 .../chromeos/input_method/input_method_engine.cc   |    6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/chrome/browser/chromeos/input_method/input_method_engine.cc b/chrome/browser/chromeos/input_method/input_method_engine.cc
index 4357ae9..7b18c1a 100644
--- a/chrome/browser/chromeos/input_method/input_method_engine.cc
+++ b/chrome/browser/chromeos/input_method/input_method_engine.cc
@@ -26,7 +26,11 @@
 #include "chromeos/ime/ibus_text.h"
 #include "chromeos/ime/input_method_manager.h"
 #include "ui/events/event.h"
+#if defined(USE_X11)
 #include "ui/events/keycodes/keyboard_code_conversion_x.h"
+#else
+#include "ui/events/keycodes/keyboard_code_conversion.h"
+#endif
 #include "ui/keyboard/keyboard_controller.h"
 
 namespace chromeos {
@@ -495,6 +499,7 @@ void GetExtensionKeyboardEventFromKeyEvent(
     ::XLookupString(x_key, NULL, 0, &keysym, NULL);
     ibus_keyval = keysym;
   } else {
+#if defined(USE_X11)
     // Convert ui::KeyEvent.key_code to DOM UIEvent key.
     // XKeysymForWindowsKeyCode converts key_code to XKeySym, but it
     // assumes US layout and does not care about CapLock state.
@@ -503,6 +508,7 @@ void GetExtensionKeyboardEventFromKeyEvent(
     // TODO(komatsu): Support non-us keyboard layouts.
     ibus_keyval = ui::XKeysymForWindowsKeyCode(event.key_code(),
                                                event.IsShiftDown());
+#endif
   }
   ext_event->key = input_method::GetIBusKey(ibus_keyval);
 }
-- 
1.7.9.5

